<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Freelemon&#39;s open world</title>
  <meta name="author" content="Hongbin Zuo">
  
  <meta name="description" content="Think before write.">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="Freelemon&#39;s open world"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Freelemon&#39;s open world" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-45802564-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">Freelemon&#39;s open world</a></h1>
  <h2><a href="/">Write, Code, Share, Learn</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
      <li><a href="/about">About</a></li>
    
    <li> <a href="/atom.xml">RSS</a> </li>
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div>
</header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper">
  <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2016-07-05T13:28:15.000Z"><a href="/2016/07/05/Sort-Your-Brain-Out/">Jul 5 2016</a></time>
      
      
  
    <h1 class="title"><a href="/2016/07/05/Sort-Your-Brain-Out/">Sort Your Brain Out</a></h1>
  

    </header>
    <div class="entry">
      
        <h1 id="大脑大搜查">大脑大搜查</h1><h2 id="大脑的优化技巧">大脑的优化技巧</h2><ol>
<li>水——每天第一件事就是为你的大脑补充水分</li>
<li>运动——大脑健康的关键（也是维持神智的关键）</li>
<li>压力——控制皮质醇来管理压力</li>
<li>阳光——沐浴阳光，稳定情绪</li>
<li>咖啡因——在很多方面都对大脑有益，但要适可而止</li>
</ol>
<h2 id="廉颇老矣、尚能饭否">廉颇老矣、尚能饭否</h2><ol>
<li>要经常地用学习向大脑发起挑战——它能重新进入“快速学习”的模式。一切就是这么简单</li>
<li>工作能锐化大脑</li>
<li>了解神经可塑性，能激发出大脑为提高技能所必需的专注精神</li>
<li>了解和利用想象的力量</li>
<li>成年后随着不断学习，人类智商依然会增长</li>
<li>心流——为自己设定不太难，也不太容易，而是恰到好处的目标！</li>
</ol>
<blockquote>
<p>我们的年轻人喜欢奢侈品。他们态度恶劣，蔑视权威——他们不尊重长辈，喜欢在锻炼身体的地方叽叽喳喳。孩子们现在成了家庭里的暴君，而非家人的侍从。长辈走入房间，他们也不再起身致敬。他们顶撞父母，在公众场合喧嚣，不停吃零食，欺压师长。——苏格拉底</p>
</blockquote>
<h2 id="虚拟大脑">虚拟大脑</h2><ol>
<li>大脑并不能“一心多用”，多任务切换时会付出认知成本。</li>
<li>你是自己数码设备的主人还是奴隶？</li>
<li>意外的干扰积少成多。多少醍醐灌顶的时刻因为沉思到一半就分心而错过了呢？</li>
</ol>
<h2 id="去钓鱼">去钓鱼</h2><ol>
<li>爱迪生的“浸泡”法（“浸泡”这个翻译有待商榷），我想起了吴伯凡老师提到的“成功与不成功的最大区别是：你是否能够足够沉浸在自己所做的事情当中”。</li>
<li>工作与玩耍的结合提升创新力</li>
</ol>
<h2 id="后见之明的冰山">后见之明的冰山</h2><ol>
<li>大多数时候，你以为自己做的是合乎逻辑、深思熟虑的决定，其实只是为一个纯粹基于情绪做出的决定附加听起来说得过去的理由。所以，在现实中，你往往并不是彻底地把事情想透，而是不知不觉地以后见之明回顾大脑已经抛出来的决定。</li>
<li>奥妙是稍微推迟一阵再最终作决定，揣摩着它过上几天，让潜意识有机会搅动起来——要让直觉有机会吸收、理解一切，它才能做决定。</li>
</ol>
<blockquote>
<p>失败和不快乐的主要原因在于，你用自己最需要的东西，换回了现在想要的东西。——Zig Ziglar</p>
</blockquote>
<ol>
<li>赠与本身就是奖励</li>
<li>别在生气的时候回复消息：情绪化很危险。</li>
</ol>
<h2 id="三思而吃">三思而吃</h2><ol>
<li>慢，用小碗，食物从胃反馈到大脑需要15-20分钟</li>
<li>细菌的作用</li>
<li>缓释碳水化合物</li>
<li>零食慎吃，香蕉不错</li>
</ol>
<h2 id="冥想">冥想</h2><p>阿德里安的反思，三件事情非常重要：<br> － 不断挑战我的大脑<br> － 不断为它提供合适的燃料<br> － 认真考虑直觉告诉自己的事情</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2016-06-18T08:29:12.000Z"><a href="/2016/06/18/The-pain-of-Jinja2/">Jun 18 2016</a></time>
      
      
  
    <h1 class="title"><a href="/2016/06/18/The-pain-of-Jinja2/">The pain of Jinja2</a></h1>
  

    </header>
    <div class="entry">
      
        <blockquote>
<p>There are many reasons to choose a generally better solution, but there is only one reason you don’t do that, which is it’s not suitable for your problem domain.<br>Who said that? Well, it’s me. LOL</p>
</blockquote>
<h2 id="The_origination">The origination</h2><p>In the past two weeks, we have been struggling with Jinja2 template. I have read the famous Two scoops of Django and Q&amp;A on StackOverflow with regard to choosing a template system for Django web project, Jinja2 is praised here and there, so it seems we cannot be wrong to replace native template system called DTL(Django Template Language) with it. </p>
<p>When we first build the whole project, we use DTL. When the web project is open for test, it seems sort of slow when opening pages. After testing some environment changes, none of them can help. Considering the goodness of Jinja2, and we observe the template rendering time is long, so we decide to try Jinja2.</p>
<h2 id="The_substitution_path">The substitution path</h2><h3 id="What_have_we_done_for_this_solution?">What have we done for this solution?</h3><p>First of all, I changed the configuration to make DTL and Jinja2 coexist. Following completely the user guide from Jinja2 official website does not work, so I have to search around to make it work finally. Of course, at first I think the best solution is only use Jinja2 because it’s simple. But it turned out that would not work, because the 3rd-party module allauth(We use it for user management) brings lots of HTML pages and we cannot pay the cost to replace them all in Jinja2 syntax. So they have to coexist, and there are three ways to achieve it:</p>
<ol>
<li>Place DTL template pages and Jinj2 pages in different directories</li>
<li>Use regex matching on URL pattern</li>
<li>Use template page extensions</li>
</ol>
<p>I tried the second method, it does not work fine. After comparing method 1 and method 3, I tried the third one cause it looks like an easy solution. BTW, since we have a common base template called base.html, by using this technology we have to copy it to two files: base.html and base.jinja2.html, and they have same content in different syntax.</p>
<p>After the configuration is done, then the real trouble surfaces. It is context processor. We use context processor to hold system menus and other static or relatively static content, but Jinja2 does not have that mechanism, and some guy even said if you have heavy logic in context processor, don’t use Jinja2. Anyhow, there’s always a solution, we refactor the function in context processor by moving it into back-end views. At this point, we don’t clearly recognize the difference. But in the end, we analyze and conclude this is the performance bottleneck for “our” Jinja2 solution. Is there any alternative solution for this problem? Yes, use global variables, but we don’t have time to try it again.</p>
<p>Back to our Jinja2 substitution path, after context processor is fixed, the last big thing is replace DTL syntax with Jinja2 syntax in HTML pages. Here first I want to write a progam, but the quickest way is to use regex replacement. The difficult point of regex replacement is writing correct regular expressions. We use an interesting open source tool called VerbalExpression(JSVerbalExpression) to achieve it. There are lots of examples in its test code. It’s fun and efficient.</p>
<p>Is it done? No. Last thing at last: we have some custom filters in DTL syntax, it’s not a simple substitution work, we have to change it by using Jinja2 syntax. After this is finished, the whole Jinj2 substitution work is done.</p>
<h2 id="The_result">The result</h2><p>We test the substitution result, and it is frustrating. We again studied the solution and the praising words about Jinja2. The big difference is when rendering strings in memory, Jinja2 is definitely faster, but for database queries, the answer is No. We feel the pain.</p>
<p>Anyway, we need to fix this.</p>
<h2 id="The_final_solution">The final solution</h2><p>Since database queries are the main cause of performance bottleneck, we can cache static content in cache system such as Redis. We have used Redis before, so we take couple hours to set it up. Redis is simple and helpful, the result is positive. 2 weeks vs. couple hours, what a pain. So the conclusion is whatever they say about it, you need to measure it and make it work in your scenario, whilst you need to pay attention to the cost.</p>
<p>We finally decide not to use Jinja2, but stay with DTL. We keep the Jinja2 branch and we keep a close eye on both of them, maybe one day we still need it. And until then, the substitution experience can help a lot.</p>
<p>No pains, no gains. Have a good day!</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2016-03-29T15:38:51.000Z"><a href="/2016/03/29/The-Way-of-Django/">Mar 29 2016</a></time>
      
      
  
    <h1 class="title"><a href="/2016/03/29/The-Way-of-Django/">The Way of Django</a></h1>
  

    </header>
    <div class="entry">
      
        <p>As a software architect, compared to software developer, I face more choices and challenges every day when constructing software systems. There’s no silver bullet in software development as told by Fred Brooks, but there’s always a better way to build software considering cost and productivity, and the last but the most important factor for modern software development: being happy programmers.</p>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2016/03/29/The-Way-of-Django/#more" class="more-link">Read More</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2015-11-28T12:41:46.000Z"><a href="/2015/11/28/Docker-installation-on-Mac/">Nov 28 2015</a></time>
      
      
  
    <h1 class="title"><a href="/2015/11/28/Docker-installation-on-Mac/">Docker installation on Mac</a></h1>
  

    </header>
    <div class="entry">
      
        <p>This post is only valid for OS X, and it is the first post of Spark installation blog series.</p>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2015/11/28/Docker-installation-on-Mac/#more" class="more-link">Read More</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2015-06-20T05:34:12.000Z"><a href="/2015/06/20/Construction-Method-Reading-Notes/">Jun 20 2015</a></time>
      
      
  
    <h1 class="title"><a href="/2015/06/20/Construction-Method-Reading-Notes/">Construction Method Reading Notes</a></h1>
  

    </header>
    <div class="entry">
      
        <h1 id="我读《构建之法》">我读《构建之法》</h1><p>以前读过邹欣老师的几篇博客，觉得还是有些受用。这次看到邹欣老师出书，就赶热闹买了一本，看看软件从业者眼中的现代软件工程是什么样子。这本书我看的比较快，也没做笔记，今天有点时间，就把我认为比较有意思的一些点总结一下，对自己算是个交代。</p>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2015/06/20/Construction-Method-Reading-Notes/#more" class="more-link">Read More</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2015-06-20T04:44:39.000Z"><a href="/2015/06/20/Hexo-3-0-on-Mac/">Jun 20 2015</a></time>
      
      
  
    <h1 class="title"><a href="/2015/06/20/Hexo-3-0-on-Mac/">Hexo 3.0 on Mac</a></h1>
  

    </header>
    <div class="entry">
      
        <p>爱折腾就得花时间，Hexo是个好东西，但一到环境切换上就不让人省心了。花了多半天，总算切到MBP上了，不算顺利，有些小坑，记录一下。</p>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2015/06/20/Hexo-3-0-on-Mac/#more" class="more-link">Read More</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2015-01-21T18:02:45.000Z"><a href="/2015/01/22/HTTP-Status-406/">Jan 22 2015</a></time>
      
      
  
    <h1 class="title"><a href="/2015/01/22/HTTP-Status-406/">HTTP Status 406</a></h1>
  

    </header>
    <div class="entry">
      
        <p>用Spring MVC 4.0写一个REST服务，实验的过程中碰到了406错误，具体错误消息如下，</p>
<blockquote>
<p>The resource identified by this request is only capable of generating responses with characteristics not acceptable according to the request “accept” headers.</p>
</blockquote>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2015/01/22/HTTP-Status-406/#more" class="more-link">Read More</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2015-01-19T16:45:18.000Z"><a href="/2015/01/20/VagrantTips/">Jan 20 2015</a></time>
      
      
  
    <h1 class="title"><a href="/2015/01/20/VagrantTips/">Vagrant Tips</a></h1>
  

    </header>
    <div class="entry">
      
        <p>听说Vagrant管理虚拟机不错，研究了一下Vagrant和Docker的区别，决定安装Vagrant，中间遇到了两个问题，分享如下。</p>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2015/01/20/VagrantTips/#more" class="more-link">Read More</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>





<nav id="pagination">
  
  
    <a href="/page/2/" class="alignright next">下一頁</a>
  
  <div class="clearfix"></div>
</nav></div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="搜尋">
    <input type="hidden" name="q" value="site:hongbinzuo.github.io">
  </form>
</div>

  

  
<div class="widget tagcloud">
  <h3 class="title">標籤雲</h3>
  <div class="entry">
    <a href="/tags/Akka/" style="font-size: 10px;">Akka</a> <a href="/tags/Architecture/" style="font-size: 13.33px;">Architecture</a> <a href="/tags/Cassandra/" style="font-size: 10px;">Cassandra</a> <a href="/tags/Concurrency/" style="font-size: 15px;">Concurrency</a> <a href="/tags/DI/" style="font-size: 13.33px;">DI</a> <a href="/tags/Design-Patterns/" style="font-size: 15px;">Design Patterns</a> <a href="/tags/Django/" style="font-size: 11.67px;">Django</a> <a href="/tags/Docker/" style="font-size: 10px;">Docker</a> <a href="/tags/Emacs/" style="font-size: 10px;">Emacs</a> <a href="/tags/FP/" style="font-size: 10px;">FP</a> <a href="/tags/Gradle/" style="font-size: 10px;">Gradle</a> <a href="/tags/Groovy/" style="font-size: 10px;">Groovy</a> <a href="/tags/Hibernate/" style="font-size: 11.67px;">Hibernate</a> <a href="/tags/IoC/" style="font-size: 11.67px;">IoC</a> <a href="/tags/Java/" style="font-size: 20px;">Java</a> <a href="/tags/JavaEE/" style="font-size: 11.67px;">JavaEE</a> <a href="/tags/Javascript/" style="font-size: 10px;">Javascript</a> <a href="/tags/Kubernetes/" style="font-size: 10px;">Kubernetes</a> <a href="/tags/Linux/" style="font-size: 11.67px;">Linux</a> <a href="/tags/Misc/" style="font-size: 10px;">Misc</a> <a href="/tags/NIO/" style="font-size: 11.67px;">NIO</a> <a href="/tags/NoSQL/" style="font-size: 10px;">NoSQL</a> <a href="/tags/Python/" style="font-size: 11.67px;">Python</a> <a href="/tags/REST/" style="font-size: 11.67px;">REST</a> <a href="/tags/Reading/" style="font-size: 10px;">Reading</a> <a href="/tags/Redis/" style="font-size: 10px;">Redis</a> <a href="/tags/Ruby/" style="font-size: 10px;">Ruby</a> <a href="/tags/SBT/" style="font-size: 11.67px;">SBT</a> <a href="/tags/SE/" style="font-size: 10px;">SE</a> <a href="/tags/SOA/" style="font-size: 10px;">SOA</a> <a href="/tags/SOAP/" style="font-size: 10px;">SOAP</a> <a href="/tags/Scala/" style="font-size: 18.33px;">Scala</a> <a href="/tags/Spark/" style="font-size: 10px;">Spark</a> <a href="/tags/Spring/" style="font-size: 13.33px;">Spring</a> <a href="/tags/Vagrant/" style="font-size: 10px;">Vagrant</a> <a href="/tags/algorithms/" style="font-size: 10px;">algorithms</a> <a href="/tags/appfuse/" style="font-size: 11.67px;">appfuse</a> <a href="/tags/blog/" style="font-size: 11.67px;">blog</a> <a href="/tags/email/" style="font-size: 10px;">email</a> <a href="/tags/favorites/" style="font-size: 10px;">favorites</a> <a href="/tags/github/" style="font-size: 10px;">github</a> <a href="/tags/grails/" style="font-size: 13.33px;">grails</a> <a href="/tags/hexo/" style="font-size: 13.33px;">hexo</a> <a href="/tags/learning/" style="font-size: 10px;">learning</a> <a href="/tags/maven/" style="font-size: 10px;">maven</a> <a href="/tags/nodejs/" style="font-size: 10px;">nodejs</a> <a href="/tags/play/" style="font-size: 10px;">play!</a> <a href="/tags/reading/" style="font-size: 16.67px;">reading</a> <a href="/tags/test/" style="font-size: 11.67px;">test</a>
  </div>
</div>


  <iframe width="100%" height="550" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=2&ptype=1&speed=0&skin=1&isTitle=1&noborder=1&isWeibo=1&isFans=1&uid=1734417403&verifier=faa09416&dpc=1"></iframe>


  <div class="widget tag">
<h3 class="title">友情链接</h3>
<ul class="entry">
<li><a href="http://zipperary.com/" title="Zippera's Blog">Hexo作者博客</a></li>
<li><a href="http://blog.csdn.net/happydeer/" title="陆其明的博客">豆巴陆其明</a></li>
<li><a href="http://zhengyaotian.com/" title="Yaotian的博客">Yaotian</a></li>
<li><a href="http://bobjiang.com/" title="Bob Jiang's Blog">Bob Jiang</a></li>
<li><a href="http://youfei.github.io/" title="You fei's Blog">快乐的小伙伴儿</a></li>
<li><a href="http://moonshadow778.github.io/" title="moonshadow">moonshadow778</a></li>
</ul>
</div>


  <div class="widget tag">
<h3 class="title">我的阅读列表</h3>
   <div class="entry"><script type="text/javascript" src="http://www.douban.com/service/badge/openworld/?selection=latest&amp;picsize=medium&amp;show=collection&amp;n=8&amp;cat=book&amp;columns=2"></script></div>

</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2016 Hongbin Zuo
  
  &nbsp;
  <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1000271202'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "v1.cnzz.com/z_stat.php%3Fid%3D1000271202%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
</div>
<div class="clearfix"></div>


</footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>


<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F017d48b7d485850445707f9e552bfde4' type='text/javascript'%3E%3C/script%3E"));
</script>
</body>
</html>